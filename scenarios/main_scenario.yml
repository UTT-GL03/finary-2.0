- name: Test Finary Dashboard Features
  url: http://localhost/
  # Wait for dashboard full load:
  # .grid is present only when loading = false
  waitForSelector: main.container .grid

  actions:
    - name: Go to incomes page
      type: click
      # The "View all" link for incomes
      element: "article:nth-of-type(2) header a[href='/incomes']"
      pageChange: true
      # Wait for incomes page: custom test-id
      waitForSelector: "[data-testid='incomes-loaded']"

    - name: Open first income detail
      type: click
      # First row, last td contains the <a> "View"
      element: "table tbody tr:nth-child(1) td:last-child a"
      pageChange: true
      # Wait for detail page: <h1>Détail de la dépense:</h1>
      waitForSelector: "main.container h1"

    - name: Return to dashboard
      type: click
      # Click the header logo (Link to="/")
      element: "header h1"
      pageChange: true
      # Wait again for dashboard fully loaded
      waitForSelector: "main.container .grid"

    - name: Go to outcomes page
      type: click
      # Click on outcomes "View all" link from dashboard
      element: "article:nth-of-type(1) header a[href='/outcomes']"
      pageChange: true
      # Wait for outcomes page to load
      waitForSelector: "h1:has-text('Outcomes')"

    - name: Open add outcome dialog
      type: click
      # Click the button to open AddMoney dialog for outcomes
      element: "button[aria-label='Add outcome'], button:has-text('Add')"
      # Wait for dialog to appear
      waitForSelector: "dialog[open], [role='dialog']"

    - name: Scroll to potential savings section
      type: scroll
      # Scroll to the PotentialEconomy component
      element: "article h3:has-text('Potential Savings')"