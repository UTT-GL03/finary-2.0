# Readme

## **Choix du sujet**

Finary est un service qui permet dâ€™optimiser ses dÃ©penses et de gÃ©rer son partimoine.

Cette application permet Ã  la fois dâ€™identifier les dÃ©penses en doublons, abonnement dâ€™un service non utilisÃ©, ou encore investir son argent, pour faire fructifier son patrimoine, sans frais â€œinjustifiÃ©sâ€ par les banques et services traditionnels.

Il yâ€™a moins dâ€™une semaine, Finary ont levÃ© 25 millions, et comptabilisent plus de 600k dâ€™utililsateurs (dont nous faisons partis). Ce type de plateforme innovante nous interesse particulierement, tant sur le volet technologique, que sur les divers impact sociaux et plus largement environnementaux.

## **UtilitÃ© sociale**

Les services de gestion de patrimoine comptabilise aujourdâ€™hui 4 millions dâ€™utilisateurs en France. De maniÃ¨re plus gÃ©nÃ©rale, les services bancaires sont devenus une partie intÃ©grante de notre quotidien.

Lâ€™inflation en France n'a cessÃ© de croitre ces derniÃ¨res annÃ©es. Dâ€™aprÃ¨s lâ€™inserm, +5,9% en 2023, 1,9% en 2024.

Câ€™est dans ce contexte que de plus en plus de personne ont le dÃ©sir de mieux gÃ©rer leur patrimoine, aussi bien leurs dÃ©penses que leurs mÃ©thodes dâ€™investissements.

Les services bancaires comme Finary, proposent un accompagnement autonome et personnalisÃ©, pour Ã  la fois aider lâ€™utilisateur Ã  mieux dÃ©penser son argent, et mieux lâ€™investir.

A travers ces divers fonctionnalitÃ©s, ces applications permettent de redonner du pouvoir dâ€™achat, et de faire gagner du temps.

- Autonomie sur la gestion de ses comptes
- Transparence complÃ¨te sur tous les frais (bien plus bas que les banques traditionnelles)
- Plateforme tout en un, quoi centralise gestion des comptes et investissement du patriomoine

## **Effets de la numÃ©risation**

Ce type de plateforme se revendique avant tout comme un outil tout en un. En quelques clics, l'utilisateur peut connecter l'ensemble de ses services bancaires, et avoir un apperÃ§u global de ses dÃ©penses. Cette capacitÃ© de centralisation permet de supprimer le travail chronophage et manuel de revelÃ©s des comptes. 
D'un point de vue environnemental, ce type de plateforme permet de diminuer le nombre de connexion aux services tiers. Au lieu de se rendre quotidiennement sur 5 applications, Finary permet de visualiser les donnÃ©es souhaitez en un seul click.

Les services bancaires digitaux ont permi de numÃ©riser les factures, relevÃ©s de comptes, et autre paperasse, ce qui permet une rÃ©duction drastique de l'utilisation du papier. En creusant ce point, on peut identifier des avantages environnementaux comme la rÃ©duction de l'emprunte carbone de la livraison des lettres.

    
- Effet rebond sur lâ€™utilisation excessive Ã  cause de la facilitÃ© dâ€™utilisation.

  ## Identification des concurrents:

Nous avons identifiÃ© plusieurs acteurs qui Ã©voluent dans le mÃªme secteur dâ€™activitÃ© que Finary.

Nous nous sommes basÃ©s sur nos connaissances et sur des sources externes : [https://fr.semrush.com/website/finary.com/competitors/#:~:text=Comparaison des visites mensuelles %3A,.fr et avenuedesinvestisseurs.fr](https://fr.semrush.com/website/finary.com/competitors/#:~:text=Comparaison%20des%20visites%20mensuelles%20%3A,.fr%20et%20avenuedesinvestisseurs.fr).

Nous avons dans un premier temps, dressÃ© un tableau pour nous donner une idÃ©e des ressources utilisÃ©es par nos diffÃ©rents acteurs.

Nous avons utilisÃ© lâ€™outil destinÃ© au dÃ©veloppeurs â€œinspectâ€, qui nous permet de consulter divers types de donnÃ©es. Les Ã©lÃ©ments qui nous ont semblÃ© Ãªtre pertinent sont le nombre de requete, le transfert rÃ©seau en MB, et les ressources chargÃ©es en MB.

| Service | URL | RequÃªtes | Transfert rÃ©seau | Ressources chargÃ©es |
| --- | --- | --- | --- | --- |
| Finary | https://finary.com/fr | 70 | 2.1 MB | 5.9 MB |
| Bankin | https://bankin.com/ | 35 | 1.7 MB | 3.3 MB |
| Linxo | https://linxo.com/ | 42 | 1.8 MB | 7.2 MB |
| Revolut | https://www.revolut.com/fr-FR/ | 95 | 46,2 MB | 49 MB |

## **ScÃ©narios d'usage et impacts**

Nous allons prendre lâ€™exemple dâ€™un utilisateur quotidien, qui consulte ses investissements et ses comptes plusieurs fois par jours. Nous pouvons estimer quâ€™il consulte au moins 5 fois par jour la web app, le matin, le midi et plusieurs fois le soir. 

Nous verrons donc avec 2 cas dâ€™utilisation:

- La consultation des informations
- Lâ€™investissement de son patrimoine (moins quotidien en fonction du type dâ€™utilisateur)

### **ScÃ©nario : "Consultation de ses comptes"**

1. Il consulte la courbe sur la page dâ€™accueil.
3. Il consulte le dÃ©tail dâ€™un compte (dÃ©penses / revenus)
4. Il consulte le dÃ©tail d'une donnÃ©e
5. Il retourne sur la page dâ€™accueil

### **ScÃ©nario : Consultation des informations de la communautÃ©**

1. Lâ€™utilisateur charge la page dâ€™accueil
2. Il se rend dans la rubrique communautÃ©.
3. Il consulte le sommaire des articles les plus rÃ©cents.
4. Il clique sur lâ€™un des articles pour le consulter.
5. Il lit lâ€™ensemble de lâ€™article.
6. Il retourne sur la rubrique des articles.

## **Impact de l'exÃ©cution des scÃ©narios auprÃ¨s de diffÃ©rents services concurrents**

L'EcoIndex d'une page (de A Ã  G) est calculÃ© (sources :Â [EcoIndex](https://www.ecoindex.fr/comment-ca-marche/),Â [Octo](https://blog.octo.com/sous-le-capot-de-la-mesure-ecoindex),Â [GreenIT](https://github.com/cnumr/GreenIT-Analysis/blob/acc0334c712ba68939466c42af1514b5f448e19f/script/ecoIndex.js#L19-L44)) en fonction du positionnement de cette page parmi les pages mondiales concernant :

- le nombre de requÃªtes lancÃ©es,
- le poids des tÃ©lÃ©chargements,
- le nombre d'Ã©lÃ©ments du document.

Nous avons choisi de comparer l'impact des scÃ©narios sur les services concurrents de Finary que nous avons identifiÃ©s, et rÃ©ferencÃ©s dans la partie â€œIdentification des concurrentsâ€.

| **Service** | **Score (sur 100)** | **Classe** |
| --- | --- | --- |
| Finary | 86 | A ğŸŸ© |
| Bankin | 85 | A ğŸŸ© |
| Linxo | 85 | A ğŸŸ© |
| Revolut | 78 | B ğŸŸ© |

## Business model

## Bankin

Bankin fonctionne principalement sur un modÃ¨le freemium combinÃ© Ã  des services B2B et des partenariats

- Lâ€™application de base permet de regrouper tous ses comptes bancaires en un seul espace, gratuitement, pour le grand public
- Un abonnement Premium propose des fonctionnalitÃ©s avancÃ©es comme un meilleur suivi des dÃ©penses, des notifications enrichies et la possibilitÃ© de crÃ©er des catÃ©gories personnalisÃ©es
- Bankin propose Ã©galement des produits et services pour les entreprises (B2B) : par exemple des solutions dâ€™agrÃ©gation bancaire et dâ€™enrichissement de donnÃ©es Ã  destination de fintechs, banques, ou assureurs souhaitant intÃ©grer des fonctionnalitÃ©s de pilotage de comptes pour leurs propres clients
- Des revenus sont gÃ©nÃ©rÃ©s via des partenariats (ex. cashback, offre de produits financiers partenaires via lâ€™app, etc.)
- Enfin, la sociÃ©tÃ© monÃ©tise lâ€™accÃ¨s Ã  des APIs et des solutions Data pour lâ€™analyse de transaction et la catÃ©gorisation, proposÃ©es en marque blanche

## Linxo

Linxo combine le modÃ¨le freemium, les services premium, les partenariats financiers et une offre B2B avec sa filiale Linxo Connect

- Lâ€™app gratuite permet dâ€™agrÃ©ger des comptes et dâ€™obtenir un suivi budgÃ©taire de base, tandis que lâ€™offre Premium apporte la catÃ©gorisation personnalisÃ©e, la recherche avancÃ©e et la prÃ©vision du solde
- Linxo gÃ©nÃ¨re des revenus additionnels via lâ€™aide Ã  lâ€™Ã©pargne, lâ€™exÃ©cution de virements bancaires intÃ©grÃ©s, et la recommandation de produits financiers partenaires (crÃ©dits, assurances, etc.)
- Une part importante du business model est lâ€™offre Linxo Connect qui propose une API dâ€™agrÃ©gation bancaire et dâ€™initiation de paiement sous licence de lâ€™ACPR. Cette offre vise les banques, fintechs, experts-comptables et institutionnels qui souhaitent intÃ©grer lâ€™agrÃ©gation ou le paiement open banking dans leurs solutions (revenus B2B par abonnement ou usage)
- Linxo bÃ©nÃ©ficie du soutien dâ€™un grand groupe bancaire franÃ§ais et sâ€™appuie sur la certification ISO 27001 pour rassurer partenaires et clients sur la sÃ©curitÃ©

## Revolut

Revolut est une nÃ©obanque au business model multi-leviers, Ã  la fois B2C et B2B.

- Lâ€™application propose un compte courant gratuit avec IBAN, carte bancaire, transferts, change multi-devises, suivi de budget et analytics.
- Plusieurs formules dâ€™abonnements Premium/Metal (paiement mensuel) donnent accÃ¨s Ã  des avantages (assurances, plafonds Ã©tendus, opÃ©rations gratuites, cashback, tradingâ€¦)
- Les revenus sont aussi gÃ©nÃ©rÃ©s via les frais dâ€™utilisation (ex : retraits au-delÃ  des plafonds), commissions sur change, investissement et trading (actions, cryptos), cashback sur achats, ventes de services dâ€™assurance, etc.
- Sur le segment B2B, Revolut propose Revolut Business, une solution payante de gestion de comptes professionnels et dâ€™outils pour PME, incluant facturation, cartes dâ€™Ã©quipes, paiements internationaux, API, etc.
- Revolut monÃ©tise aussi la distribution de produits partenaires financiers au sein de lâ€™app (prÃªts, assurances, crypto), prenant une commission sur la souscription et lâ€™utilisation

---

| Entreprise | ModÃ¨le principal | ModÃ¨les complÃ©mentaires | B2B/Partenariats |
| --- | --- | --- | --- |
| Bankin | Freemium grand public | Premium, cashback, Data/API | Oui (agrÃ©gation, data, API, marque blanche) |
| Linxo | Freemium + Premium | Reco produits, virements intÃ©grÃ©s | Oui (Linxo Connect API agrÃ©gation, paiement) |
| Revolut | Compte bancaire + abonnement | Commissions, trading, cashback | Oui (Revolut Business, produits partenaires) |

Voici un tableau plus prÃ©cis sur les divers utilisation des services en fonction des status:


| Service | Visiteur anonyme | AbonnÃ© (Premium/Payant) |
| --- | --- | --- |
| Bankin | Consultation de comptes agrÃ©gÃ©s de base - Vue globale des soldes - CatÃ©gorisation automatique standard | CatÃ©gorisation personnalisÃ©e - Recherche avancÃ©e de transactions - Suivi budgÃ©taire avancÃ© - Export de donnÃ©es - Alertes personnalisÃ©es - AccÃ¨s prioritaire au support |
| Linxo | AgrÃ©gation multi-comptes bancaire - Visualisation budgÃ©taire simple - PrÃ©vision de solde standard - CatÃ©gorisation automatique de base | CrÃ©ation de ses propres catÃ©gories - PrÃ©visions de solde dÃ©taillÃ©es - Recherche par montant/date/catÃ©gorie illimitÃ©e - Suivi prÃ©cis de lâ€™Ã©pargne et des investissements - Virements bancaires directement via lâ€™appli - Support et assistance prioritaire |
| Revolut | Compte bancaire gratuit (IBAN) - Carte virtuelle et physique standard - Paiements et transferts de base - Change multi-devises Ã  tarif standard | Cartes haut de gamme - Plafonds de retrait supÃ©rieurs - Assurances premium (voyage, achat, etc.) - AccÃ¨s Ã  lâ€™investissement (cryptos/actions) sans frais ou Ã  frais rÃ©duits - Cashback sur achats - Support prioritaire |

Comme nos concurrents fonctionnent tous sur un model freemium, nous pensons restÃ© sur ce mÃªme modÃ¨le pour ne pas perdre lâ€™utilisateur.

Bankin propose ses services Ã  3.33â‚¬ / mois, Finary 12â‚¬ /mois, Linxo 4â‚¬/mois et Revolut 10â‚¬/mois. 

Nous avons remarquÃ© que tous ces concurrents proposent un large panel de fonctionnalitÃ© pour assurer leur rentabilitÃ©. Leur offre devient donc beaucoup plus large et parfois moins claire. 

Or nous voulons principalement nous concentrer sur la gestion des dÃ©penses, sans ajouter une multitude de produit dans le produit. Nous pensons donc pouvoir nous diffÃ©rencier par la simplicitÃ© et le cout plus rÃ©duit que nous pouvons proposer, proposer un abonnement Ã  2.99â‚¬.

Il nous faudrait donc 1190 abonnÃ©s pour pouvoir verser un salaire.

En nous basant sur le cout salaire median, qui sâ€™Ã©lÃ¨ve Ã  3569â‚¬  selon lâ€™URSAF.

Les 2 fonctionnalitÃ©s sur lesquelles nous allons nous concentrer sont:

- RÃ©fÃ©rencement simple des dÃ©penses
- Identification des doublons & Ã©conomie possibles, via des conseils donnÃ©s aux utilisateurs

Les autres business model, dons, publicitÃ© ne nous paraissent absolument pas viable pour notre projet, Ã©tant donnÃ© que tous nos concurrents proposent dÃ©jÃ  ces services Ã  des prix trÃ¨s accÃ©ssibles, sans publicitÃ©, qui appauvri lâ€™experience utilisateur.

Nous sommes bien conscient que cet objectif peut Ãªtre compliquÃ© Ã  atteindre. 

Nous avons cependant pensÃ© Ã  plusieurs stratÃ©gies pour toucher notre marchÃ© de Niche:

- Publication de contenu sur les rÃ©seaux  pour crÃ©er une communautÃ©
- SystÃ¨me de parrainage
- Subvention de lâ€™Ã©tat: Nous pensons que la littÃ©ratie financiÃ¨re de la population peut Ãªtre favorable Ã  lâ€™Ã©tat.

## Maquette de l'interface et Ã©chantillon de donnÃ©es:

AprÃ¨s avoir dÃ©fini les diffÃ©rents scÃ©narios dâ€™utilisation , et surtout les fonctionnalitÃ©s techniques que nous voulons implementer dans notre application, nous avons determinÃ© les ressources web qui seront disponibles:

le â€/â€ sera le tableau de bord de lâ€™utilisateur, sur lequel il peut voir lâ€™argent qui lui reste, et un rapide aperÃ§u de ses dÃ©penses et revenus.

Nous aurons ensuite les deux ressources: â€œ/incomeâ€ et â€œ/outcomeâ€, qui afficheront de maniÃ¨re plus dÃ©taillÃ©es, Ã  lâ€™aide de graphique, les dÃ©penses les revenues, les catÃ©gories, les doublons, et une Ã©volution au cours du temps. Lâ€™utilisateur pourra aussi ajouter, modifier ou supprimer ces variables.

**Maquette du prototype**

![20251013_155713](https://github.com/user-attachments/assets/59c33783-07a7-4e14-987b-47f5553687f0)

Fig.1: type de page pour la visualisation du compte / dashboard

![20251013_163544](https://github.com/user-attachments/assets/99593fb3-597b-4b82-b6f0-7ef5e45abdb2)

Fig.2 : type de page dÃ©taillant chanque entitÃ© (Income & Outcome)

Dans une dÃ©marche plus Ã©coresponsable, les dÃ©penses et revenus sont pour l'instant limitÃ©s Ã  ceux du du mois courant (entre 30 et 40).

Pour Ã©viter tout problÃ¨me liÃ©s aux droits d'auteurs, nous utilisons des donnÃ©es gÃ©nÃ©rÃ©es via dummy-json. Ces donnÃ©es correspondent Ã  la structure de nos principaux concurrents : chaque dÃ©pense et chaque revenu comportent une catÃ©gorie, un montant, une description de taille libre, une date, et un utilisateur associÃ©. Chaque utilisateur dispose alors de deux listes associÃ©es, la liste des dÃ©penses et la liste des revenus.

## **ImplÃ©mentation du scÃ©nario prioritaire**

### **Ã‰tape de prototypage : DonnÃ©es chargÃ©es de maniÃ¨re statique**

Cette premiÃ¨re version qui a Ã©tÃ© developpÃ©e est trÃ¨s simplifiÃ©e, et permet simplement dâ€™accÃ©der Ã  des informations de â€œbasesâ€, que nous estimions les plus importantes pour notre application. Nous avons nommÃ© cette version: `v1.0.0` 

Celle-ci est caracterisÃ©e par:

- l'Ã©chantillon de donnÃ©es est encore chargÃ© dans le code de maniÃ¨re statique,
- les fonctionnalitÃ©s implÃ©mentÃ©es ne sont que celles nÃ©cessaires pour suivre le scÃ©nario prioritaire ("**Consultation de ses comptes et ses investissements**").

**Page dâ€™accueil**

<img width="1624" height="1056" alt="Screenshot 2025-11-03 at 15 07 40" src="https://github.com/user-attachments/assets/ba0afaf7-2a04-4cf3-9d66-71d5896b317b" />


**Figure 3: Page dâ€™accueil**

Pour rappel notre scÃ©nario principal Ã©tait le suivant:

**ScÃ©nario : "Consultation de ses comptes"**

1. Il consulte la courbe sur la page dâ€™accueil.
3. Il consulte le dÃ©tail dâ€™un compte (dÃ©penses / revenus)
4. Il consulte le dÃ©tail d'une donnÃ©e
5. Il retourne sur la page dâ€™accueil

Comme nous nous concentrons plus sur la gestion du patrimoine et non lâ€™investissement, nos pages et le types de ressources restent similaires.

Sur notre page dâ€™accueil lâ€™utilisateur peut consulter les courbes de ces entrÃ©es et sorties dâ€™argent. Il peut filtrer de maniÃ¨re temporelle, et peut consulter le dÃ©tail de toutes ses dÃ©penses et toutes ses entrÃ©es dâ€™argent. 

Nous pouvons donc rÃ©aliser le scÃ©nario de maniÃ¨re complÃ©tement similaires Ã  nos sites concurrents.

Pour comprendre de maniÃ¨re visuelle les Ã©tapes du scÃ©nario, nous avons dans la figure 3 la page dâ€™accueil qui affiche les graphiques, avec un filtre qui nous permet de choisir la chronologie des informations Ã  afficher.

Dans un second temps, nous avons les â€œincomesâ€ et â€œoutcomesâ€.


<img width="1624" height="1056" alt="Screenshot 2025-11-03 at 15 07 51" src="https://github.com/user-attachments/assets/1214987e-65b9-4c80-b35f-adca00681cc3" />

**Figure 4: Income et outcome**

On peut ensuite cliquer sur â€œview allâ€.

<img width="1624" height="1056" alt="Screenshot 2025-11-03 at 15 08 19" src="https://github.com/user-attachments/assets/204a4746-9e6e-4936-8391-eddcb829a0ac" />


Puis on peut consulter les dÃ©tails prÃ©cis dâ€™une action:
<img width="1624" height="1056" alt="Screenshot 2025-11-03 at 15 08 39" src="https://github.com/user-attachments/assets/dae714b1-a5e2-46ae-9b58-71444ad8cd00" />


Dans cette premiÃ¨re version, nous avons essayÃ© dâ€™Ãªtre les plus minimalistes possible en terme dâ€™interface, mais nous Ã©tions nÃ©anmoins obligÃ© dâ€™utiliser des librairies pour afficher les donnÃ©es sous forme de graphiques et tableaux.

Maintenant nous pouvons commencer les mesures.

Tout dâ€™abord sur notre page dâ€™accueil:

| **EcoIndex** | **GES (gCO2e)** | **Taille du DOM** | **RequÃªtes** | **Taille de la page (ko)** |
| --- | --- | --- | --- | --- |
| Mode "dÃ©veloppement" | 80 A ğŸŸ¦ | 58 | 29 | 2240 |
| Mode "prÃ©-production" | 93 A ğŸŸ¦ | 57 | 4 | 160 |

Au dÃ©part, nous avions dÃ©veloppÃ© notre web app en utilisant un hasRouter, qui permet de faire du rendu par fragment. 

Seulement, lorsque nous voulions faire les mesures avec le logiciel ecoIndex App, lâ€™outil ne reconnaissait pas le changement des pages.

Nous avons donc optÃ© pour un router traditionnel.

AprÃ¨s ces modifications, nous avons pu facilement mesurÃ© les donnÃ©es demandÃ©es:

| Page | Grade | Ecoindex | Eau (cl) | GES (gCO2e) | Nb de requÃªtes | Taille de la page (Ko) | Taille du DOM |
| --- | --- | --- | --- | --- | --- | --- | --- |
| http://localhost:4173/ | A | 93/100 | 17.10 | 1.14 | 4 | 161.120 | 57 |
| http://localhost:4173/incomes | A | 85/100 | 19.60 | 1.30 | 4 | 1.205 | 300 |
| http://localhost:4173/9 | A | 97/100 | 15.90 | 1.06 | 4 | 1.205 | 5 |
| http://localhost:4173/bis | A | 97/100 | 15.90 | 1.06 | 4 | 1.205 | 5 |

Nous prÃ©cisions que ces mesures concernent les chargement des pages avec des donnÃ©es **statiques.** Ces rÃ©sultats sont particuliÃ¨rement bon car nous n'avons que trÃ¨s peu de texte affichÃ© Ã  l'Ã©cran.

### **Mesures de la consommation Ã©nergÃ©tique lors du passage Ã  l'Ã©chelle**

---

Nous avons rÃ©alisÃ© lâ€™automatisation des tests, qui crÃ©ent un rapport html Ã  chaque fois que nous pushons du code sur notre repository.

Nous pouvons maintenant simuler des donnÃ©es des mesures qui collent beaucoup plus Ã  la rÃ©alitÃ©.

Comme prÃ©cisÃ© prÃ©cedemment, nous avons peu de donnÃ©es textuelle Ã  afficher, ce qui explique pourquoi nous obtenons de trÃ¨s bon rÃ©sultats. De plus nous avons â€œpeuâ€ de donnÃ©es. En effet, pour chaque utilisateur, nous avons entre 5 et 10 dÃ©penses referencÃ©es par utilisateurs. Nous allons donc augmenter par 10 le nombre de dÃ©penses par utilisateurs, puisque ce sont ces donnÃ©es qui sont vouÃ©es Ã  sâ€™accumuler au cours du temps. Avec ce nouveau mutiplicateur, chaque utlilisateur aura entre 50 et 100 donnÃ©es.

**Ã‰volution de l'EcoIndex lors du passage Ã  l'Ã©chelle**

Voici un tableau qui reprÃ©sente le passage Ã  lâ€™Ã©chelle, permettant de comparer les donnÃ©es entre 5 - 10 donnÃ©es par utilsateurs, Ã  50 - 100.

| **Page**                     | **Ecoindex**       | **GES (gCO2e)** | **Taille du DOM** | **Nb de requÃªtes** | **Taille de la page (Ko)**   |
|------------------------------|--------------------|-----------------|--------------------|--------------------|-------------------------------|
| http://localhost:4173/       | ~~93 A ğŸŸ©~~<br>83 A ğŸŸ© | ~~1.14~~<br>1.34 | ~~57~~<br>87      | ~~4~~<br>6         | ~~161.120~~<br>681.713       |
| http://localhost:4173/incomes| ~~85 A ğŸŸ©~~<br>47 D ğŸŸ¨ | ~~1.30~~<br>2.06 | ~~300~~<br>2943  | ~~4~~<br>6         | ~~1.205~~<br>10 819.901     |
| http://localhost:4173/9      | ~~97 A ğŸŸ©~~<br>87 A ğŸŸ© | ~~1.06~~<br>1.26 | ~~5~~<br>20       | ~~4~~<br>5         | ~~1.205~~<br>679.973        |
| http://localhost:4173/bis    | ~~97 A ğŸŸ©~~<br>87 A ğŸŸ© | ~~1.06~~<br>1.26 | ~~5~~<br>87       | ~~4~~<br>1         | ~~1.205~~<br>144.781        |



**Tab.6**: Effet du passage Ã  l'Ã©chelle sur l'impact du scÃ©nario "**Consultation de ses comptes**" dans le prototype v1.0.1.

Les donnÃ©es sont cohÃ©rentes, nous perdons en efficacitÃ©. La page qui se dÃ©grade le plus est la page â€œincomeâ€, ce qui est logique puisque câ€™est celle dans laquelle nous affichons toutes les donnÃ©es textuelles des transactions de lâ€™utillisateur dans un tableau. Pour pallier Ã  ce problÃ¨me, nous pourrons charger quâ€™un nombre restreint de donnÃ©es au dÃ©but du chargement, puis ajouter un bouton â€œvoir plusâ€ pour charger des donnÃ©es plus viellles.

Pour simuler le fetch des donnÃ©es, nous avons utilisÃ© la librarie fetch, et modifiÃ© lâ€™emplacement de notre fichier â€œdata.jsonâ€ dans le dossier public.

Nous avons donc du adapter le code, pour rÃ©ellement pouvoir le rendre dynamique. Cette version est donc la v1.0.1.


### Mesure de la consommation Ã©nergÃ©tique liÃ©e Ã  la consultation

Le logiciel **GreenFrame** permet dâ€™estimer, pour les diffÃ©rents composants de lâ€™architecture, la consommation Ã©nergÃ©tique :

* du **CPU** (Ã  partir du temps de calcul),
* de la **mÃ©moire vive** (Ã  partir de la taille des donnÃ©es mÃ©morisÃ©es),
* du **disque** (Ã  partir de la taille des donnÃ©es lues et Ã©crites),
* du **rÃ©seau** (Ã  partir de la taille des donnÃ©es reÃ§ues et envoyÃ©es),
* pour le **navigateur uniquement**, de lâ€™**Ã©cran** (Ã  partir du temps dâ€™exÃ©cution du scÃ©nario).

#### (a) Consulter la page dâ€™accueil (avec graphiques)

|             | cpu (Wh)  | mem (Wh)  | disk (Wh) | network (Wh) | screen (Wh) | total (Wh) |
| ----------- | --------- | --------- | --------- | ------------ | ----------- | ---------- |
| Navigateur  | 0.0063    | 0.000060  | 0.0       | 0.0032       | 0.068       | 0.078      |
| Serveur Web | 0.0000050 | 0.0000029 | 0.0       | 0.0030       | 0.0         | 0.0030     |

**Estimation de lâ€™empreinte carbone :** 35.828 mg eq. COâ‚‚ Â± 0,9 % (81.059 mWh)

---

#### (b) Consulter des dÃ©tails sur les dÃ©penses

|             | cpu (Wh)  | mem (Wh)  | disk (Wh) | network (Wh) | screen (Wh) | total (Wh) |
| ----------- | --------- | --------- | --------- | ------------ | ----------- | ---------- |
| Navigateur  | 0.0066    | 0.000059  | 0.0       | 0.0032       | 0.071       | 0.081      |
| Serveur Web | 0.0000047 | 0.0000030 | 0.0       | 0.0030       | 0.0         | 0.0030     |

**Estimation de lâ€™empreinte carbone :** 36.981 mg eq. COâ‚‚ Â± 1,9 % (83.669 mWh)

---

#### Analyse

Par rapport Ã  ce que pouvait laisser penser lâ€™EcoIndex, les rÃ©sultats indiquent que :

* La **consommation rÃ©seau** (serveur et client) et **lâ€™Ã©cran du navigateur** sont les principaux contributeurs Ã  la consommation Ã©nergÃ©tique totale.
* Lâ€™affichage des graphiques et des dÃ©tails en lui-mÃªme a un impact nÃ©gligeable sur le CPU, la mÃ©moire et le disque.
* Lâ€™impact indirect de lâ€™affichage se manifeste via le **temps dâ€™Ã©clairage de lâ€™Ã©cran**, qui reste le facteur dominant cÃ´tÃ© client.

Ainsi, les trois Ã©lÃ©ments ayant le plus dâ€™impact sont :

1. **Ã‰cran du navigateur**
2. **RÃ©seau cÃ´tÃ© client**
3. **RÃ©seau cÃ´tÃ© serveur**

Le reste des composants (CPU, mÃ©moire, disque) contribue trÃ¨s peu Ã  la consommation Ã©nergÃ©tique totale.

**Consommation cumulÃ©e pour les deux scÃ©narios :** 72.81 mg eq. COâ‚‚ Â± 1,9 % (164.728 mWh)

### Effet de l'introduction d'une base de donnÃ©es

Dans l'etape prÃ©cedante nous avons introduis l'uitlisation de couch db, qui nous permet de rendre ce service beaucoup plus rÃ©aliste. 
Nous avons fait le choix dans un premier temps de ne plus prendre en compte les utilisateurs. En effet, nous avions dans notre fichier data.json, un object users et un objet expense. Daans cet objet l'id de l'utilisateur est renseignÃ©, ansi que sa date d'occurence, le montant qui peut Ãªtre nÃ©gatif ou positif.
Dans notre base de donnÃ©es sur couch db, nous avons dÃ©sormais uniquement les exepnses, et nous partons du principe que l'utilisateur est celui ayant l'id nÂ°10. Pour rendre encore plus rÃ©aliste les donnÃ©es, nous avons Ã©galement augmentÃ© le nombre d'exepnse, passant de 1000 Ã  5000. Nous avons donc sur couchdb.
Nous avons nommÃ© notre base de donnÃ©es "finary".
Voici un exemple de document dans cette base de donnÃ©es:

{
  "_id": "64b9ae1d85b558f9ff6f977634004c20",
  "_rev": "1-2dca812452f0f1b3a9095465a4b006f1",
  "id": "0",
  "user_id": "10",
  "created_at": "2024-07-20 15:32",
  "amount": 1000,
  "category": "Entertainment"
}

Comme nous avions pu le voir prÃ©cÃ©dememnt, la page qui est la plus Ã  mÃªme d'Ãªtre optimiser sont les pages dÃ©penses et revenues, puisque nous affichons dedans toutes les donnÃ©es de l'utilisateur de maniÃ¨re textuelle dans un tableau, contrairement Ã  la page d'accueil qui affiche des graphiques (ce pourquoi nous observons l'utilisation un peu plus elevÃ© du cpu).

### StratÃ©gie de limitation du nombre d'Ã©lÃ©ments affichÃ©s

Nous allons donc travailler sur l'optimisation des pages revenues et dÃ©penses.
Nous allons suivre les mÃªme pratique que tous les sites reconnus, Ã  savoir charger uniquement les donnÃ©es que l'utilisateur a besoin de voir. Il faudra donc faire des requÃªtes spÃ©cifiques en utilisant mango, pour fetch un maximum de 30 dÃ©penses (limite arbitraire) lors du premier chargement. Un bouton "voir plus" sera intÃ©grÃ© et permettera de charger 30 Ã©lements en plus.

#### RÃ©sultats aprÃ¨s optimisation

GrÃ¢ce Ã  cette stratÃ©gie de pagination, nous ne chargeons plus toutes les donnÃ©es d'un coup mais seulement une partie (30 Ã©lÃ©ments initialement). L'utilisateur peut ensuite charger davantage de donnÃ©es via le bouton "voir plus" s'il le souhaite. Cela nous permet d'obtenir des gains significatifs en termes d'EcoIndex :


| Ã‰tape                                                                                       | EcoIndex | Eau (cl) | GES (gCO2e) | Taille du DOM | RequÃªtes | Taille de la page (Ko) |
| ------------------------------------------------------------------------------------------- | -------- | -------- | ----------- | ------------- | -------- | ---------------------- |
| **Chargement de la page** - [http://localhost/](http://localhost/)                          | 74 B     | 2.28     | 1.52        | 88            | 7        | 3809.333               |
| **Go to incomes page** - [http://localhost/incomes](http://localhost/incomes)               | 83 A     | 2.01     | 1.34        | 113           | 6        | 543.738                |
| **Open first income detail** - [http://localhost/detail/3982](http://localhost/detail/3982) | 88 A     | 1.86     | 1.24        | 20            | 6        | 538.748                |
| **Return to dashboard** - [http://localhost/](http://localhost/)                            | 75 B     | 2.25     | 1.5         | 88            | 2        | 3270.055               |



On observe notamment une amÃ©lioration significative sur la page `/incomes` qui passe d'un score de **47 D** Ã  **83 A**, avec une rÃ©duction drastique de la taille du DOM (de 2943 Ã  113 Ã©lÃ©ments) et de la taille de la page (de 10 819 Ko Ã  543 Ko).

#### Logique de pagination temporelle avec `lastDateIndex`

Pour implÃ©menter cette pagination efficace, nous utilisons une approche basÃ©e sur l'ordre temporel des transactions. La logique est implÃ©mentÃ©e dans le composant `incomes.jsx` :

1. **Premier chargement** : Nous rÃ©cupÃ©rons les 30 transactions les plus rÃ©centes en triant par date dÃ©croissante (`created_at: "desc"`).

2. **Suivi de la derniÃ¨re date** : La variable `lastDateIndex` stocke la date de la derniÃ¨re transaction chargÃ©e :
   ```javascript
   setLastDateIndex(docs[docs.length - 1].created_at);
   ```

3. **Chargement suivant** : Lorsque l'utilisateur clique sur "Load More", nous effectuons une nouvelle requÃªte qui rÃ©cupÃ¨re les 30 transactions suivantes dont la date est **strictement infÃ©rieure** Ã  `lastDateIndex` :
   ```javascript
   selector: {
     _id: { $gt: null },
     user_id: "10",
     created_at: { $lt: lastDateIndex }  // RÃ©cupÃ¨re les transactions plus anciennes
   },
   sort: [{ created_at: "desc" }],
   limit: 30
   ```

4. **Fusion des donnÃ©es** : Les nouvelles donnÃ©es sont ajoutÃ©es aux donnÃ©es existantes pour maintenir l'historique complet :
   ```javascript
   setData({ expenses: [...data.expenses, ...docs] });
   ```

Cette approche garantit que nous chargeons toujours les donnÃ©es dans l'ordre chronologique inverse (du plus rÃ©cent au plus ancien) sans doublons, tout en minimisant la charge initiale sur le navigateur et le rÃ©seau.

<img width="1624" height="1060" alt="Screenshot 2025-12-08 at 14 15 41" src="https://github.com/user-attachments/assets/51683948-e430-46b4-a1ff-e7bdeabf51d4" />





##TO DO 
- [x] Pouvoir rajouter des dÃ©penses
- [x] Pouvoir rajouter des revenus
- [ ] Filtrer par catÃ©gorie
- [ ] Faire un algo qui identifie les doublons et potentiels Ã©conomies
